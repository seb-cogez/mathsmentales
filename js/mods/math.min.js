import utils from"./utils.js";export{math as default};const math={premiers:[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999],round:function(nb,precision){if(void 0===precision)return Math.round(nb);if(precision<5)return Number(Math.round(Number(nb+"e"+precision))+"e"+-precision);{let z;return new Big(nb).round(precision).toFixed()}},valeurParDefaut:function(valeur,precision){return void 0===precision?Math.floor(valeur):Number(Math.floor(Number(valeur+"e"+precision))+"e"+-precision)},valeurParExces:function(valeur,precision){return void 0===precision?Math.ceil(valeur):Number(Math.ceil(Number(valeur+"e"+precision))+"e"+-precision)},aleaInt:function(min,max,...others){let qty=1,avoid=[],arrayType=!1;utils.security=300;let nodouble=!1,notPrime=!1;for(let i=0;i<others.length;i++)String(Number(others[i]))===others[i]||"number"==typeof others[i]?(qty=others[i],arrayType=!0):"string"==typeof others[i]&&"^"==others[i][0]&&(avoid=others[i].substring(1).split(","),avoid.indexOf("&")>-1&&(nodouble=!0),avoid.indexOf("prime")>-1&&(notPrime=!0),avoid=avoid.map(Number));if(min===max)return min;if(max<min&&([min,max]=[max,min]),arrayType){var integers=[];for(let i=0;i<qty;i++){let thisint=math.round(utils.alea()*(max-min))+min;if(avoid.indexOf(thisint)>-1||nodouble&&integers.indexOf(thisint)>-1||notPrime&&math.premiers.indexOf(thisint)>-1){if(i--,!utils.checkSecurity())break}else if(integers.push(thisint),!utils.checkSecurity())break}return integers}{let thisint;do{if(thisint=math.round(utils.alea()*(max-min))+min,!utils.checkSecurity())break}while(avoid.indexOf(thisint)>-1||notPrime&&math.premiers.indexOf(thisint)>-1);return thisint}},aleaFloat:function(min,max,precision,...others){let qty=1,avoid=[],nodouble=!1;utils.security=300;for(let i=0;i<others.length;i++)String(Number(others[i]))===others[i]||"number"==typeof others[i]?qty=others[i]:"string"==typeof others[i]&&"^"===others[i][0]&&(avoid=others[i].substring(1).split(","),avoid.indexOf("&")>-1&&(nodouble=!0),avoid=avoid.map(Number));if(max<min&&([min,max]=[max,min]),qty>1){let nb;var floats=[];for(let i=0;i<qty;i++)if(nb=math.round(utils.alea()*(max-min)+min,precision),avoid.indexOf(nb)>-1||nodouble&&floats.indexOf(nb)>-1){if(i--,!utils.checkSecurity())break}else if(floats.push(nb),!utils.checkSecurity())break;return floats}{let nb;do{if(nb=math.round(utils.alea()*(max-min)+min,precision),!utils.checkSecurity())break}while(avoid.indexOf(nb)>-1);return nb}},unOuNombre:value=>(value=Number(value),Math.round(Math.random())?1:value),signedNumber:function(nb){return 0===nb?"":nb>0?"+"+nb:nb},signIfOne:function(nb){return 1===nb?"":-1===nb?"-":nb},signedNumberButOne:function(nb){return 0===(nb=Number(nb))?"":1===nb?"+":-1===nb?"-":nb>0?"+"+nb:nb},nP:function(nb){return"-"===String(nb)[0]?"("+nb+")":nb},listeProduits:function(entier,max){let liste=[];void 0===max&&(max=10);for(let i=1,top=Math.floor(Math.sqrt(entier));i<=top;i++){let reste,quotient=~~(entier/i);0==entier%i&&i<=max&&quotient<=max&&liste.push(i+"\\times"+quotient)}return liste.join("; ")},listeDiviseurs:function(nb,array=!1){let maxSearch=Math.floor(Math.sqrt(nb)),diviseurs=[],grandsdiviseurs=[];for(let i=1;i<=maxSearch;i++)nb%i==0&&(diviseurs.push(i),i!==nb/i&&grandsdiviseurs.unshift(nb/i));return diviseurs=diviseurs.concat(grandsdiviseurs),!0===array?diviseurs:diviseurs.join("; ")},plusGrandDiviseur:function(nb){const liste=math.listeDiviseurs(nb,!0);return liste[liste.length-2]},plusGrandDiviseurPremier(nb){if(nb<2)return nb;let prime=0,indice=0;for(;math.premiers[indice]<=nb;)indice++,nb%math.premiers[indice]==0&&(prime=math.premiers[indice]);return prime},listeDiviseurs10:function(nb){let diviseurs=[2,3,5,9,10],liste=[];for(let i=0,len=diviseurs.length;i<len;i++){const div=diviseurs[i];nb%div==0&&liste.push(div)}return liste.length?liste.join("; "):"aucun des nombres"},nonDiviseur(nb){let unnondiviseur=0;do{unnondiviseur=math.aleaInt(2,nb-1)}while(nb%unnondiviseur==0);return unnondiviseur},fractionDecimale(decimal){let string=decimal.toString(),pointPosition=string.indexOf(".");if(pointPosition<0)return"\\dfrac{"+decimal+"}{1}";{let nbChiffres=string.length-pointPosition-1;return"\\dfrac{"+math.round(decimal*Math.pow(10,nbChiffres),0)+"}{"+Math.pow(10,nbChiffres)+"}"}},unDiviseur(nb,notOne=!1){let diviseurs=math.listeDiviseurs(nb,!0);return notOne&&(diviseurs=_.rest(diviseurs)),diviseurs[math.aleaInt(0,diviseurs.length-1)]},unpower:function(value){let matches=value.match(/(\d*)\^(\d*)/g);if(matches)for(let i=0,l=matches.length;i<l;i+=2)value=value.replace(matches[i],math.powerToProduct(matches[i]));return value},powerToProduct(power){let nb=Number(power.substring(0,power.indexOf("^"))),puissance=Number(power.substring(power.indexOf("^")+1)),a=[];for(let i=0;i<puissance;i++)a.push(nb);return a.join("*")},sToMin(sec){let time="";return(sec=Number(sec))>3600&&(time+=~~(sec/3600)+" h ",sec%=3600),sec>60&&(time+=~~(sec/60)+" min ",sec%=60),time+sec},toTex:string=>string.replace(/\*/g,"\\times"),simplifieRacine(radicande){const factors=Algebrite.run("factor("+radicande+")").split("*");let outOfSquareR=1,inSquareR=1;for(let i=0;i<factors.length;++i){const elt=factors[i].split("^"),nb=elt[0],power=void 0===elt[1]?1:elt[1];outOfSquareR*=Math.pow(nb,Math.floor(power/2)),inSquareR*=Math.pow(nb,power%2)}return(outOfSquareR>1?outOfSquareR:"")+(inSquareR>1?"\\sqrt{"+inSquareR+"}":"")},estDivisiblePar(nb,par,type){let reponses={w:[" est divisible ","n'est pas divisible"],yn:["oui","non"]};return(nb=Number(nb))%(par=Number(par))==0?reponses[type][0]:reponses[type][1]},compare:(a,b)=>a<b?"\\lt":a>b?"\\gt":"=",pgcd:function(a,b){return Algebrite.run("gcd("+a+","+b+")")},ppcm:function(a,b){return Algebrite.run("lcm("+a+","+b+")")},inverse:function(expr,notex){let ret;return ret=void 0===notex||!1===notex?Algebrite.run("printlatex(1/("+expr+"))"):Algebrite.run("1/("+expr+")"),ret},calc:function(expr,notex){let ret;return ret=void 0===notex||!1===notex?Algebrite.run("printlatex("+expr+")").replace(/frac/g,"dfrac"):Algebrite.run(expr),ret},getHM(h,m,s){void 0===s&&(s=0);var d=new Date(2010,1,1,Number(h),Number(m),Number(s));return d.getHours()+" h "+(d.getMinutes()<10?"0"+d.getMinutes():d.getMinutes())},getHMs(h,m,s){void 0===s&&(s=0);var d=new Date(2010,1,1,Number(h),Number(m),Number(s));return d.getHours()+" h "+(d.getMinutes()<10?"0"+d.getMinutes():d.getMinutes())+" min "+(d.getSeconds()<10?"0"+d.getSeconds():d.getSeconds())+" s."},fractionSimplifiee(n,d){(n<0&&d<0||n>0&&d<0)&&(n=-n,d=-d);const gcd=math.pgcd(n,d);return Number.isInteger(n/d)?n/d:"\\dfrac{"+n/gcd+"}{"+d/gcd+"}"},simplifyFracDec(n,d){for(;n%10==0&&d%10==0;)n/=10,d/=10;return"\\dfrac{"+n+"}{"+d+"}"},phrase(operandes,operations,option,ordre){let x,y,r,z,phrases={"+":["la somme de ${x} et de ${y}","${x}+${y}","${x}+${y}"],"-":["la différence entre ${x} et ${y}","${x}-${y}","${x}-${y}"],"*":["le produit de ${x} par ${y}","${x}\\\\times ${y}","${x}*${y}"],"/":["le quotient de ${x} par ${y}","${x}\\\\div ${y}","${x}/${y}"],q:["le quotient de ${x} par ${y}","\\\\dfrac{${x}}{${y}}","${x}/${y}"]};switch(x=operandes[0],y=operandes[1],option){case"p":r=eval("`"+phrases[operations[0]][0]+"`");break;case"a":r=eval("`"+phrases[operations[0]][1]+"`");break;case"v":r=eval("`"+phrases[operations[0]][2]+"`")}if(operations.length>1)switch(ordre?(x=r,y=operandes[2],z=x,["*","/"].indexOf(operations[1])>-1&&["-","+"].indexOf(operations[0])>-1&&(z="("+x+")")):(x=operandes[2],y=r,z=y,(["*","/","-"].indexOf(operations[1])>-1&&["-","+"].indexOf(operations[0])>-1||"/"===operations[0])&&(z="("+y+")")),option){case"p":r=eval("`"+phrases[operations[1]][0]+"`").replace("de le","du");break;case"a":ordre?x=z:y=z,r=eval("`"+phrases[operations[1]][1]+"`");break;case"v":ordre?x=z:y=z,r=eval("`"+phrases[operations[1]][2]+"`")}return r},bigDecimal(a,op,b){let x=Big(a);return eval("x."+op+"("+b+").toString()")},montant:function(billets,entier,tot){let valeursBillets=[5,10,20,50,100],min=1/0,total=0;for(let i=0,len=billets.length;i<len;i++)min>valeursBillets[billets[i]]&&(min=valeursBillets[billets[i]]),total+=valeursBillets[billets[i]];return tot?total:entier?math.aleaInt(total-min+1,total):math.aleaFloat(total-min+1,total,2)},listeBillets:function(billets){let valeursBillets=[5,10,20,50,100],lesbillets={5:0,10:0,20:0,50:0,100:0},txt="des billets : ";for(let i=0,len=billets.length;i<len;i++)lesbillets[valeursBillets[billets[i]]]++;for(let val in lesbillets)lesbillets[val]>1?txt+=lesbillets[val]+" de "+val+" €, ":lesbillets[val]>0&&(txt+=val+" €, ");return txt},NumberToLetter:function(nombre,U=null,D=null){const letter={0:"zéro",1:"un",2:"deux",3:"trois",4:"quatre",5:"cinq",6:"six",7:"sept",8:"huit",9:"neuf",10:"dix",11:"onze",12:"douze",13:"treize",14:"quatorze",15:"quinze",16:"seize",17:"dix-sept",18:"dix-huit",19:"dix-neuf",20:"vingt",30:"trente",40:"quarante",50:"cinquante",60:"soixante",70:"soixante-dix",80:"quatre-vingt",90:"quatre-vingt-dix"};let i,j,n,quotient,reste,nb,ch,numberToLetter="";if(nombre.toString().replace(/ /gi,"").length>15)return"dépassement de capacité";if(isNaN(nombre.toString().replace(/ /gi,"")))return"Nombre non valide";if(nb=parseFloat(nombre.toString().replace(/ /gi,"")),Math.ceil(nb)!=nb)return nb=nombre.toString().split("."),NumberToLetter(nb[0])+(U?" "+U+" et ":" virgule ")+NumberToLetter(nb[1])+(D?" "+D:"");switch(n=nb.toString().length,n){case 1:numberToLetter=letter[nb];break;case 2:nb>19?(quotient=Math.floor(nb/10),reste=nb%10,nb<71||nb>79&&nb<91?(0==reste&&(numberToLetter=letter[10*quotient]),1==reste&&(numberToLetter=letter[10*quotient]+"-et-"+letter[reste]),reste>1&&(numberToLetter=letter[10*quotient]+"-"+letter[reste])):numberToLetter=letter[10*(quotient-1)]+"-"+letter[10+reste]):numberToLetter=letter[nb];break;case 3:quotient=Math.floor(nb/100),reste=nb%100,1==quotient&&0==reste&&(numberToLetter="cent"),1==quotient&&0!=reste&&(numberToLetter="cent "+NumberToLetter(reste)),quotient>1&&0==reste&&(numberToLetter=letter[quotient]+" cents"),quotient>1&&0!=reste&&(numberToLetter=letter[quotient]+" cent "+NumberToLetter(reste));break;case 4:case 5:case 6:quotient=Math.floor(nb/1e3),reste=nb-1e3*quotient,1==quotient&&0==reste&&(numberToLetter="mille"),1==quotient&&0!=reste&&(numberToLetter="mille "+NumberToLetter(reste)),quotient>1&&0==reste&&(numberToLetter=NumberToLetter(quotient)+" mille"),quotient>1&&0!=reste&&(numberToLetter=NumberToLetter(quotient)+" mille "+NumberToLetter(reste));break;case 7:case 8:case 9:quotient=Math.floor(nb/1e6),reste=nb%1e6,1==quotient&&0==reste&&(numberToLetter="un million"),1==quotient&&0!=reste&&(numberToLetter="un million "+NumberToLetter(reste)),quotient>1&&0==reste&&(numberToLetter=NumberToLetter(quotient)+" millions"),quotient>1&&0!=reste&&(numberToLetter=NumberToLetter(quotient)+" millions "+NumberToLetter(reste));break;case 10:case 11:case 12:quotient=Math.floor(nb/1e9),reste=nb-1e9*quotient,1==quotient&&0==reste&&(numberToLetter="un milliard"),1==quotient&&0!=reste&&(numberToLetter="un milliard "+NumberToLetter(reste)),quotient>1&&0==reste&&(numberToLetter=NumberToLetter(quotient)+" milliards"),quotient>1&&0!=reste&&(numberToLetter=NumberToLetter(quotient)+" milliards "+NumberToLetter(reste));break;case 13:case 14:case 15:quotient=Math.floor(nb/1e12),reste=nb-1e12*quotient,1==quotient&&0==reste&&(numberToLetter="un billion"),1==quotient&&0!=reste&&(numberToLetter="un billion "+NumberToLetter(reste)),quotient>1&&0==reste&&(numberToLetter=NumberToLetter(quotient)+" billions"),quotient>1&&0!=reste&&(numberToLetter=NumberToLetter(quotient)+" billions "+NumberToLetter(reste))}return"quatre-vingt"==numberToLetter.substr(numberToLetter.length-"quatre-vingt".length,"quatre-vingt".length)&&(numberToLetter+="s"),numberToLetter}};